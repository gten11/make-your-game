<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Game</title>
    <link rel ="stylesheet" href ="index.css">
</head>
<body>
    <div id ="game">
        <img id ="asteroid1" src="images/asteroid1.png">
        <img id ="asteroid2" src="images/asteroid2.png">
        <img id ="asteroid3" src="images/asteroid3.png">
        <img id ="asteroid4" src="images/asteroid4.png">
        <img id="myShip" src="images/myShip.png">
        <img id="myShooter" src="images/myShooter.png">
        <img id ="bulletMine" src="images/bulletMine.png">
        <img id ="bullet" src="images/bullet.png">

    </div>
    
</body>

<script>
    const myShooter = document.getElementById("myShooter")
    

    let left = 0;
    let direction = 1;
    function moveShooter() {
        const gameWidth = document.getElementById("game").offsetWidth;
        const shooterWidth = document.getElementById("myShooter").offsetWidth;
        left += direction * 2;
        if (left + shooterWidth >= gameWidth || left <= 0) {
            direction *= (-1);
        }
        myShooter.style.left = left + 'px'
        requestAnimationFrame(moveShooter)
    }

    moveShooter()

</script>

<script>
    myShip = document.getElementById("myShip")
    let movingRight = false;
    let movingLeft = false;

    document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowLeft") {
            movingLeft = true;
        } else if (event.key === "ArrowRight") {
            movingRight = true;
        }
    })

    document.addEventListener("keyup", (event) => {
        if (event.key === "ArrowLeft") {
            movingLeft = false;
        } else if (event.key === "ArrowRight") {
            movingRight = false;
        }
    })

    const myShipWidth = myShip.offsetWidth;
    const gameWidth = document.getElementById("game").offsetWidth;

    let startPosition = 0 + gameWidth / 2;
    let leftMostPosition = 0 + myShipWidth/2;

    function moveShip() {
        let left = parseInt(myShip.style.left || startPosition,10)
        if (movingLeft) {
            left -= 4;
        } else if (movingRight) {
            left += 4;
       
        }
        left = Math.max(leftMostPosition, Math.min(left, gameWidth - myShipWidth / 2))
        myShip.style.left = left + 'px';
        requestAnimationFrame(moveShip);
    }
    moveShip()
</script>
</html>